import{x as u,y as S,z as x,I as m,A as E,B as A,C as I,d as B,S as L}from"./runtime.DciYrRLz.js";import{h as T,d as c,f as b}from"./disclose-version.Dl07N0Qn.js";function z(s,t,r,e=null,a=!1){let f=null,i=null,l=null;const d=u(()=>{var y,h;if(l===(l=!!t()))return;let o=!1;if(T){const n=(h=(y=c)==null?void 0:y[0])==null?void 0:h.data;!n||n==="ssr:if:true"&&!l||n==="ssr:if:false"&&l?(A(c),b(!1),o=!0):c.shift()}l?(f?S(f):f=u(()=>r(s),!0),i&&x(i,()=>{i=null})):(i?S(i):e&&(i=u(()=>e(s),!0)),f&&x(f,()=>{f=null})),o&&b(!0)});a&&(d.f|=m),d.ondestroy=()=>{f&&E(f),i&&E(i)}}function k(s,t){var e;var r=s&&((e=s[L])==null?void 0:e.t);return s===t||r===t}function C(s,t,r,e){var a,f,i=I(()=>{a=f,f=(e==null?void 0:e())||[],B(()=>{s!==r(...f)&&(t(s,...f),a&&k(r(...a),s)&&t(null,...a))})});i.ondestroy=()=>{I(()=>{f&&k(r(...f),s)&&t(null,...f)})}}export{C as b,z as i};
